{"remainingRequest":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/src/views/Login.vue","mtime":1648307908653},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHJlcXVpcmVkLCBtaW5MZW5ndGgsIGVtYWlsLCBzYW1lQXMgfSBmcm9tICd2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMnOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBmaXJlYmFzZSwgc3RvcmFnZSB9IGZyb20gJ0AvcGx1Z2lucy9maXJlYmFzZSc7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0AvY29tcG9uZW50cy9Mb2FkaW5nJzsKaW1wb3J0IEFsZXJ0IGZyb20gJ0AvY29tcG9uZW50cy9BbGVydCc7CmltcG9ydCB1dGlscyBmcm9tICdAL3BsdWdpbnMvdXRpbHMnOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAnJywKICAgICAgZW1haWw6ICcnLAogICAgICBwYXNzOiAnJywKICAgICAgcmVwYXNzOiAnJywKICAgICAgY2FyZ2FuZG86IGZhbHNlLAogICAgICBzaWdudXA6IGZhbHNlLAogICAgICBteUFsZXJ0OiB7CiAgICAgICAgZW5hYmxlOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgdGV4dDogJycsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgcHJvcHM6IFsnbG9hZGluZyddLAogIHZhbGlkYXRpb25zOiB7CiAgICBlbWFpbDogewogICAgICByZXF1aXJlZCwKICAgICAgZW1haWwsCiAgICB9LAogICAgcGFzczogewogICAgICByZXF1aXJlZCwKICAgICAgbWluTGVuZ3RoOiBtaW5MZW5ndGgoNiksCiAgICB9LAogICAgbmFtZTogewogICAgICByZXF1aXJlZCwKICAgICAgbWluTGVuZ3RoOiBtaW5MZW5ndGgoNiksCiAgICB9LAogICAgcmVwYXNzOiB7CiAgICAgIHJlcXVpcmVkLAogICAgICBtaW5MZW5ndGg6IG1pbkxlbmd0aCg2KSwKICAgICAgc2FtZUFzUGFzc3dvcmQ6IHNhbWVBcygncGFzcycpLAogICAgfSwKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmcsCiAgICBBbGVydCwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ3VzZXJzJ10pLAogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbJ2xvZ0luJ10pLAoKICAgIHN3aXRjaExvZ1NpZ24oKSB7CiAgICAgICh0aGlzLm5hbWUgPSAnJyksCiAgICAgICAgKHRoaXMuZW1haWwgPSAnJyksCiAgICAgICAgKHRoaXMucGFzcyA9ICcnKSwKICAgICAgICAodGhpcy5yZXBhc3MgPSAnJyksCiAgICAgICAgKHRoaXMuc2lnbnVwID0gIXRoaXMuc2lnbnVwKTsKICAgIH0sCgogICAgYXN5bmMgbG9nSW4odXNlcikgewogICAgICB0aGlzLmNhcmdhbmRvID0gdHJ1ZTsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXJzL2xvZ0luJywgdXNlcik7CiAgICAgIGNvbnNvbGUubG9nKCdNaSByZXNwdWVzdGE6ICcsIHJlcyk7CgogICAgICBpZiAocmVzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7CiAgICAgICAgY29uc3QgcmVzTG9hZCA9IGF3YWl0IHRoaXMubG9hZEltYWdlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FyZ2FuZG8gPSBmYWxzZTsKICAgICAgaWYgKHJlcy5zdGF0dXMgPT09ICdmYWlsZWQnKSB7CiAgICAgICAgdXRpbHMuYWxlcnQodGhpcy5teUFsZXJ0LCAnZXJyb3InLCByZXMubWVzc2FnZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXRpbHMuYWxlcnQodGhpcy5teUFsZXJ0LCAnc3VjY2VzcycsICdVc3VhcmlvIHJlZ2lzdHJhZG8gY29ycmVjdGFtZW50ZS4nKTsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBuZXdVc2VyKHVzZXIpIHsKICAgICAgdGhpcy5jYXJnYW5kbyA9IHRydWU7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2Vycy9jcmVhdGVVc2VyJywgdXNlcik7CiAgICAgIGNvbnNvbGUubG9nKCdSRVNTU1NTLT4gJywgcmVzKTsKICAgICAgdGhpcy5jYXJnYW5kbyA9IGZhbHNlOwogICAgICBpZiAocmVzLnN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHsKICAgICAgICB1dGlscy5hbGVydCh0aGlzLm15QWxlcnQsICdlcnJvcicsIHJlcy5tZXNzYWdlKTsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBsb2FkSW1hZ2UoKSB7CiAgICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlZkltZyA9IHN0b3JhZ2UucmVmKCkuY2hpbGQodGhpcy51c2Vycy51c2VyLmVtYWlsKS5jaGlsZCgnZm90b1BlcmZpbCcpOwogICAgICAgIGNvbnN0IHVybERlc2NhcmdhID0gYXdhaXQgcmVmSW1nLmdldERvd25sb2FkVVJMKCk7CiAgICAgICAgY29uc29sZS5sb2codXJsRGVzY2FyZ2EpOwogICAgICAgIHRoaXMudXNlcnMudXNlci5waG90byA9IHVybERlc2NhcmdhOwogICAgICAgIHV0aWxzLmFsZXJ0KHRoaXMubXlBbGVydCwgJ3N1Y2Nlc3MnLCB1dGlscy5tZXNzYWdlcy5VU0VSX0lNR1VQRF9TVUNDRVNTKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB1dGlscy5hbGVydCh0aGlzLm15QWxlcnQsICdlcnJvcicsIHV0aWxzLm1lc3NhZ2VzLlVTRVJfSU1HVVBEX0VSUk9SKTsKICAgICAgfQogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmMA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-layout justify-center mt-10>\n    <Loading :loading=\"cargando\"></Loading>\n    <v-flex xs12 sm8 md6 xl3>\n      <v-card>\n        <v-toolbar dark color=\"primary\" class=\"mb-5\">\n          <v-icon left right dark size=\"60\">fab fa-mixcloud</v-icon>\n          <v-toolbar-title class=\"display-1 text-md-center\"\n            >Vuepo IoT</v-toolbar-title\n          >\n        </v-toolbar>\n        <v-card-text\n          class=\"text-h5 text-md-center font-weight-light grey--text\"\n        >\n          Accede a nuestra plataforma\n        </v-card-text>\n        <v-card-text>\n          <form\n            @submit.prevent=\"logIn({ email: email, password: pass })\"\n            v-if=\"!signup\"\n          >\n            <v-text-field\n              prepend-icon=\"person\"\n              type=\"email\"\n              v-model=\"$v.email.$model\"\n              label=\"Email\"\n            >\n            </v-text-field>\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.email.required\"\n              >Campo Requerido</small\n            >\n            <small class=\"text-danger d-block mb-1 ml-8\" v-if=\"!$v.email.email\"\n              >Email no válido</small\n            >\n            <v-text-field\n              prepend-icon=\"lock\"\n              type=\"password\"\n              class=\"mt-3\"\n              v-model=\"$v.pass.$model\"\n              label=\"Password\"\n            ></v-text-field>\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.pass.minLength\"\n              >Mínimo 6 carácteres</small\n            >\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.pass.required\"\n              >Campo Requerido</small\n            >\n            <v-card-text>\n              <Alert\n                :show=\"myAlert.enable\"\n                :type=\"myAlert.type\"\n                :text=\"myAlert.text\"\n              ></Alert>\n            </v-card-text>\n            <v-card-text>\n              <v-btn\n                block\n                color=\"info\"\n                class=\"mt-5\"\n                type=\"submit\"\n                :disabled=\"$v.email.$invalid || $v.pass.$invalid\"\n                >Ingresa</v-btn\n              >\n              <v-card-text class=\"text-h7 text-md-center grey--text\">\n                Olvidé la contraseña</v-card-text\n              >\n            </v-card-text>\n            <v-divider></v-divider>\n            <v-card-text>\n              <p class=\"text-md-center\">¿No eres usuario?</p>\n              <v-btn block color=\"success\" @click=\"switchLogSign\"\n                >Regístrate</v-btn\n              >\n            </v-card-text>\n          </form>\n          <form\n            @submit.prevent=\"\n              newUser({\n                name: name,\n                email: email,\n                password: pass,\n                passwordConfirm: repass,\n              })\n            \"\n            v-if=\"signup\"\n          >\n            <v-text-field\n              prepend-icon=\"person\"\n              v-model=\"$v.name.$model\"\n              label=\"Name\"\n            >\n            </v-text-field>\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.name.required\"\n              >Campo Requerido</small\n            >\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.name.minLength\"\n              >Mínimo 6 carácteres</small\n            >\n            <v-text-field\n              prepend-icon=\"person\"\n              type=\"email\"\n              v-model=\"$v.email.$model\"\n              label=\"Email\"\n            >\n            </v-text-field>\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.email.required\"\n              >Campo Requerido</small\n            >\n            <small class=\"text-danger d-block mb-1 ml-8\" v-if=\"!$v.email.email\"\n              >Email no válido</small\n            >\n            <v-text-field\n              prepend-icon=\"lock\"\n              type=\"password\"\n              class=\"mt-3\"\n              v-model=\"$v.pass.$model\"\n              label=\"Password\"\n            ></v-text-field>\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.pass.minLength\"\n              >Mínimo 6 carácteres</small\n            >\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.pass.required\"\n              >Campo Requerido</small\n            >\n\n            <v-text-field\n              prepend-icon=\"lock\"\n              type=\"password\"\n              class=\"mt-3\"\n              v-model=\"$v.repass.$model\"\n              label=\"Retype password\"\n            ></v-text-field>\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.repass.minLength\"\n              >Mínimo 6 carácteres</small\n            >\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.repass.required\"\n              >Campo Requerido</small\n            >\n            <small\n              class=\"text-danger d-block mb-1 ml-8\"\n              v-if=\"!$v.repass.sameAsPassword\"\n              >Las contraseñas no coinciden</small\n            >\n            <v-card-text>\n              <Alert\n                :show=\"myAlert.enable\"\n                :type=\"myAlert.type\"\n                :text=\"myAlert.text\"\n              ></Alert>\n            </v-card-text>\n            <v-card-text>\n              <v-btn\n                block\n                color=\"info\"\n                class=\"mt-5\"\n                type=\"submit\"\n                :disabled=\"$v.$invalid\"\n                >Regístrate</v-btn\n              >\n            </v-card-text>\n            <v-divider></v-divider>\n            <v-card-text>\n              <p class=\"text-md-center\">¿Ya eres usuario?</p>\n              <v-btn block color=\"success\" @click=\"switchLogSign\"\n                >Ingresa</v-btn\n              >\n            </v-card-text>\n          </form>\n        </v-card-text>\n      </v-card>\n    </v-flex>\n  </v-layout>\n</template>\n\n<script>\nimport { required, minLength, email, sameAs } from 'vuelidate/lib/validators';\nimport { mapState, mapActions } from 'vuex';\nimport { firebase, storage } from '@/plugins/firebase';\nimport Loading from '@/components/Loading';\nimport Alert from '@/components/Alert';\nimport utils from '@/plugins/utils';\n\nexport default {\n  data() {\n    return {\n      name: '',\n      email: '',\n      pass: '',\n      repass: '',\n      cargando: false,\n      signup: false,\n      myAlert: {\n        enable: false,\n        type: 'success',\n        text: '',\n      },\n    };\n  },\n  props: ['loading'],\n  validations: {\n    email: {\n      required,\n      email,\n    },\n    pass: {\n      required,\n      minLength: minLength(6),\n    },\n    name: {\n      required,\n      minLength: minLength(6),\n    },\n    repass: {\n      required,\n      minLength: minLength(6),\n      sameAsPassword: sameAs('pass'),\n    },\n  },\n  components: {\n    Loading,\n    Alert,\n  },\n  computed: {\n    ...mapState(['users']),\n  },\n  methods: {\n    ...mapActions(['logIn']),\n\n    switchLogSign() {\n      (this.name = ''),\n        (this.email = ''),\n        (this.pass = ''),\n        (this.repass = ''),\n        (this.signup = !this.signup);\n    },\n\n    async logIn(user) {\n      this.cargando = true;\n      const res = await this.$store.dispatch('users/logIn', user);\n      console.log('Mi respuesta: ', res);\n\n      if (res.status === 'success') {\n        const resLoad = await this.loadImage();\n      }\n\n      this.cargando = false;\n      if (res.status === 'failed') {\n        utils.alert(this.myAlert, 'error', res.message);\n      } else {\n        utils.alert(this.myAlert, 'success', 'Usuario registrado correctamente.');\n      }\n    },\n\n    async newUser(user) {\n      this.cargando = true;\n      const res = await this.$store.dispatch('users/createUser', user);\n      console.log('RESSSSS-> ', res);\n      this.cargando = false;\n      if (res.status === 'failed') {\n        utils.alert(this.myAlert, 'error', res.message);\n      }\n    },\n\n    async loadImage() {\n       try {\n        const refImg = storage.ref().child(this.users.user.email).child('fotoPerfil');\n        const urlDescarga = await refImg.getDownloadURL();\n        console.log(urlDescarga);\n        this.users.user.photo = urlDescarga;\n        utils.alert(this.myAlert, 'success', utils.messages.USER_IMGUPD_SUCCESS);\n      } catch (err) {\n        console.log(err);\n        utils.alert(this.myAlert, 'error', utils.messages.USER_IMGUPD_ERROR);\n      }\n    }\n  },\n};\n</script>\n\n<style></style>\n"]}]}
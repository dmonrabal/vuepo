{"remainingRequest":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/src/views/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/src/views/Dashboard.vue","mtime":1663398564736},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUaXRsZSBmcm9tICdAL2NvbXBvbmVudHMvVGl0bGUnOwppbXBvcnQgdXRpbHMgZnJvbSAnQC9wbHVnaW5zL3V0aWxzJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgVnVlQXBleENoYXJ0cyBmcm9tICd2dWUtYXBleGNoYXJ0cyc7CmltcG9ydCBBcGV4Q2hhcnRzIGZyb20gJ2FwZXhjaGFydHMnOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwovL2ltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGFzaGJvYXJkJywKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICB0aGlzLnJlbG9hZENoYXJ0cygpOwogICAgICAvL3RoaXMudGltZVNlcmllcygpOwogICAgfSwgMjAwMDAwKTsKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gRm9ybSBkYXRhCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGRpYWxvZ0RlbGV0ZTogZmFsc2UsCiAgICAgIG1lbnVDaGFydHM6IGZhbHNlLAogICAgICBjYXJnYW5kbzogZmFsc2UsCiAgICAgIGVkaXRNb2RlOiBmYWxzZSwKICAgICAgZWRpdFNlcmllTW9kZTogZmFsc2UsCgogICAgICAvLyBDaGFydHMgZGF0YQogICAgICBlZGl0ZWRJbmRleDogLTEsCiAgICAgIGVkaXRlZENoYXJ0OiB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIHR5cGU6ICcnLAogICAgICAgIHBlcmlvZDogJzAnLAogICAgICAgIGRhdGVSZXE6IFtdLAogICAgICAgIG9wdGlvbnM6ICcnLAogICAgICAgIHNlcmllczogJycsCiAgICAgIH0sCiAgICAgIGRlZmF1bHRDaGFydDogewogICAgICAgIGlkOiAnJywKICAgICAgICB0eXBlOiAnJywKICAgICAgICBwZXJpb2Q6ICcwJywKICAgICAgICBkYXRlUmVxOiBbXSwKICAgICAgICBvcHRpb25zOiAnJywKICAgICAgICBzZXJpZXM6ICcnLAogICAgICB9LAogICAgICBzZXJpZXNDaGFydDogW10sCiAgICAgIGVkaXRlZFNlcmllOiB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGNvbG9yOiAnJywKICAgICAgICBkYXRhOiBbXSwKICAgICAgICBlbGVtZW50czogewogICAgICAgICAgcHJvamVjdDogJycsCiAgICAgICAgICBncm91cDogJycsCiAgICAgICAgICBkZXZpY2U6ICcnLAogICAgICAgICAgc2Vuc29yOiAnJywKICAgICAgICB9LAogICAgICB9LAogICAgICBkZWZhdWx0U2VyaWU6IHsKICAgICAgICBpZDogJycsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgY29sb3I6ICcnLAogICAgICAgIGRhdGE6IFtdLAogICAgICAgIGVsZW1lbnRzOiB7CiAgICAgICAgICBwcm9qZWN0OiAnJywKICAgICAgICAgIGdyb3VwOiAnJywKICAgICAgICAgIGRldmljZTogJycsCiAgICAgICAgICBzZW5zb3I6ICcnLAogICAgICAgIH0sCiAgICAgIH0sCgogICAgICAvLyBSdWxlcyBmcm9tCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgKHYpID0+ICEhdiB8fCAnRWwgY2FtcG8gZXMgcmVxdWVyaWRvJywKICAgICAgICAgICh2KSA9PgogICAgICAgICAgICAodiAmJiB2Lmxlbmd0aCA+PSAzICYmIHYubGVuZ3RoIDw9IDQwKSB8fAogICAgICAgICAgICAnTGEgbm9tYnJlIGRlYmUgdGVuZXIgZW50cmUgMyB5IDQwIGNhcmFjdGVyZXMnLAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGlzRm9ybVZhbGlkOiBmYWxzZSwKICAgICAgcHJvSXRlbXM6IFtdLAogICAgICBncnBJdGVtczogW10sCiAgICAgIGRldkl0ZW1zOiBbXSwKICAgICAgc2VuSXRlbXM6IFtdLAogICAgICBkYXRJdGVtczogW10sCgogICAgICBtZW51OiBmYWxzZSwKICAgICAgZ3JwRGlzOiB0cnVlLAogICAgICBkZXZEaXM6IHRydWUsCiAgICAgIHNlbkRpczogdHJ1ZSwKICAgICAgYnRuRGlzOiB0cnVlLAoKICAgICAgb3B0aW9uczogewogICAgICAgIGNoYXJ0OiB7CiAgICAgICAgICBpZDogJ3Z1ZWNoYXJ0LWV4YW1wbGUnLAogICAgICAgIH0sCiAgICAgICAgc3Ryb2tlOiB7CiAgICAgICAgICBjdXJ2ZTogJ3Ntb290aCcsCiAgICAgICAgfSwKICAgICAgICB4YXhpczogewogICAgICAgICAgY2F0ZWdvcmllczogWzE5OTEsIDE5OTIsIDE5OTMsIDE5OTQsIDE5OTUsIDE5OTYsIDE5OTcsIDE5OThdLAogICAgICAgIH0sCiAgICAgICAgbWFya2VyczogewogICAgICAgICAgc2l6ZTogMCwKICAgICAgICB9LAogICAgICB9LAogICAgICBzZXJpZXM6IFsKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAnc2VyaWVzLTEnLAogICAgICAgICAgY29sb3I6ICcjRkYwMEZGJywKICAgICAgICAgIGRhdGE6IFszMCwgNDAsIDQ1LCA1MCwgNDksIDYwLCA3MCwgOTFdLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ3Nlcmllcy0yJywKICAgICAgICAgIGRhdGE6IFsxMCwgMjAsIDI1LCA2NSwgMjEsIDMwLCA1NSwgNjBdLAogICAgICAgIH0sCiAgICAgIF0sCgogICAgICBvcHRpb25zQTogewogICAgICAgIGNoYXJ0OiB7CiAgICAgICAgICBpZDogJ3Z1ZWNoYXJ0LWV4YW1wbGUwMCcsCiAgICAgICAgfSwKICAgICAgICBzdHJva2U6IHsKICAgICAgICAgIGN1cnZlOiAnc21vb3RoJywKICAgICAgICB9LAogICAgICAgIG1hcmtlcnM6IHsKICAgICAgICAgIHNpemU6IDIsCiAgICAgICAgfSwKICAgICAgICBkYXRhTGFiZWxzOiB7CiAgICAgICAgICBlbmFibGVkOiBmYWxzZSwKICAgICAgICB9LAogICAgICAgIHhheGlzOiB7CiAgICAgICAgICB0eXBlOiAnZGF0ZXRpbWUnLAogICAgICAgICAgLy90aWNrUGxhY2VtZW50OiAnYmV0d2VlbicsCiAgICAgICAgICBjYXRlZ29yaWVzOiBbCiAgICAgICAgICAgICcxOSBKdW4gMjAxNyAwMjozMDowMCcsCiAgICAgICAgICAgICcxOSBKdW4gMjAxNyAwMzozMDowMCcsCiAgICAgICAgICAgICcxOSBKdW4gMjAxNyAwNDozMDowMCcsCiAgICAgICAgICAgICcxOSBKdW4gMjAxNyAwNTozMDowMCcsCiAgICAgICAgICAgICcxOSBKdW4gMjAxNyAwNjozMDowMCcsCiAgICAgICAgICAgICcxOSBKdW4gMjAxNyAwNzozMDowMCcsCiAgICAgICAgICAgICcxOSBKdW4gMjAxNyAwODozMDowMCcsCiAgICAgICAgICBdLAogICAgICAgICAgYXhpc1RpY2tzOiB7CiAgICAgICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgICAgfSwKICAgICAgICAgIGF4aXNCb3JkZXI6IHsKICAgICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgICAgYm9yZGVyVHlwZTogJ2RvdHRlZCcsCiAgICAgICAgICB9LAogICAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgICBlbmFibGVkOiBmYWxzZSwKICAgICAgICAgIH0sCiAgICAgICAgICByYW5nZTogNywKICAgICAgICB9LAogICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgIGZvbGxvd0N1cnNvcjogdHJ1ZSwKICAgICAgICAgIHRoZW1lOiAnZGFyaycsCiAgICAgICAgICB4OiB7IGZvcm1hdDogJ3l5eXktTU0tZGQgSEg6bW06c3MnIH0sCiAgICAgICAgfSwKICAgICAgfSwKICAgICAgc2VyaWVzQTogWwogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICdzZXJpZXMtMScsCiAgICAgICAgICBkYXRhOiBbMzEsIDQwLCAyOCwgNTEsIDQyLCAxMDksIDEwMF0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAnc2VyaWVzLTInLAogICAgICAgICAgZGF0YTogWzExLCAzMiwgNDUsIDMyLCAzNCwgNTIsIDQxXSwKICAgICAgICB9LAogICAgICBdLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFRpdGxlLAogICAgTG9hZGluZywKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ3Byb2plY3RzJywgJ3VzZXJzJywgJ2RldmljZXMnLCAnY2hhcnRzJ10pLAogIH0sCiAgd2F0Y2g6IHsKICAgIGRpYWxvZyh2YWwpIHsKICAgICAgdmFsIHx8IHRoaXMuY2xvc2UoKTsKICAgIH0sCiAgICBkaWFsb2dEZWxldGUodmFsKSB7CiAgICAgIHZhbCB8fCB0aGlzLmNsb3NlRGVsZXRlKCk7CiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICogUmVhbG9hZHMgY2hhcnQgbGlzdCB3aXRoIHRoZSBsYXN0IGRhdGEgb24gZGF0YWJhc2UKICAgICAqIE9ubHkgY2hhcnRzIHdpdGggcGVyaW9kcyAxSCBvciAyNEggKGxhc3QgaG91ciBvciBsYXN0IDI0IGhvdXJzKQogICAgICogd2lsbCBiZSB1cGRhdGVkLgogICAgICovCiAgICBhc3luYyByZWxvYWRDaGFydHMoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdbUkVMT0FESU5HIENIQVJUUyAuLi4uIF0nKTsKICAgICAgbGV0IGlzRGF0YSA9IGZhbHNlOwogICAgICBjb25zdCBjaGFydHMgPSB0aGlzLmNoYXJ0cy5jaGFydExpc3QuZmlsdGVyKChjaGFydCkgPT4gewogICAgICAgIHJldHVybiBjaGFydC5wZXJpb2QgIT09IDM7CiAgICAgIH0pOwoKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoCiAgICAgICAgY2hhcnRzLm1hcChhc3luYyAoY2hhcnQpID0+IHsKICAgICAgICAgIGNoYXJ0LnNlcmllcy5tYXAoYXN5bmMgKHNlcmllKSA9PiB7CiAgICAgICAgICAgIC8vc2VyaWUuZGF0YSA9IFtdOwoKICAgICAgICAgICAgLy8gVE9ETyBnZXQgQVBJVE9LRU4gZnJvbSBkZXZpY2UKICAgICAgICAgICAgbGV0IHBhcmFtcyA9IFsneHl0Vnh2REpTRDdRcXNlMVZPS2RkJ107CiAgICAgICAgICAgIHBhcmFtcy5wdXNoKHNlcmllLmVsZW1lbnRzLmRldmljZSk7CiAgICAgICAgICAgIHBhcmFtcy5wdXNoKHNlcmllLmVsZW1lbnRzLnNlbnNvcik7CiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGNoYXJ0LmRhdGVSZXFbMF0pOwogICAgICAgICAgICBwYXJhbXMucHVzaChjaGFydC5kYXRlUmVxWzFdKTsKCiAgICAgICAgICAgIGNvbnN0IGR0YSA9IGF3YWl0IHRoaXMuZ2V0RGF0YShwYXJhbXMpOwogICAgICAgICAgICBpZiAoZHRhLnNlcmllcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgLy8gT25seSBjaGVjayBmaXJzdCBzZXJpZQogICAgICAgICAgICAgIGNvbnN0IGRzID0gZHRhLnNlcmllc1swXTsKICAgICAgICAgICAgICBpc0RhdGEgPSB0cnVlOwogICAgICAgICAgICAgIGRzLnNhbXBsZXMuZm9yRWFjaCgocykgPT4gewogICAgICAgICAgICAgICAgc2VyaWUuZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgeDogdXRpbHMuZm9ybWF0RGF0ZShuZXcgRGF0ZShzLmRhdGUpKSwKICAgICAgICAgICAgICAgICAgeTogcy52YWx1ZSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IAoKICAgICAgICAgICAgLy9jaGFydC5zZXJpZXMucHVzaChzZXJpZSk7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1NFUklFIERBVEE6ICcsIHNlcmllLmRhdGEpOwogICAgICAgICAgICAvLyBBcGV4Q2hhcnRzLmV4ZWMoc2VyaWUuaWQsICd1cGRhdGVTZXJpZXMnLCBbeyBkYXRhOiBzZXJpZS5kYXRhIH1dKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICk7CiAgICAgIGlmIChjaGFydHMubGVuZ3RoID4gMCAmJiBpc0RhdGEpIHsKICAgICAgICBhd2FpdCB0aGlzLnVwbG9hZENoYXJ0TGlzdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCdbTk8gREFUQSEhXScpOwogICAgICB9CiAgICB9LAoKICAgIGFkZFNlcmllKCkgewogICAgICB0aGlzLmVkaXRlZFNlcmllLmlkID0gJ2lkJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIpOwogICAgICB0aGlzLmVkaXRlZFNlcmllLmRhdGEgPSBbXTsKICAgICAgdGhpcy5zZXJpZXNDaGFydC5wdXNoKHRoaXMuZWRpdGVkU2VyaWUpOwogICAgICB0aGlzLmNsb3NlTWVudVNlcmllcygpOwogICAgfSwKCiAgICB1cGRhdGVTZXJpZSgpIHsKICAgICAgY29uc29sZS5sb2coJ1tVcGRhdGVTZXJpZV0nLCB0aGlzLmVkaXRlZFNlcmllKTsKCiAgICAgIHRoaXMuc2VyaWVzQ2hhcnQgPSB0aGlzLnNlcmllc0NoYXJ0Lm1hcCgoc2VyaWUpID0+IHsKICAgICAgICBpZiAoc2VyaWUuaWQgPT09IHRoaXMuZWRpdGVkU2VyaWUuaWQpIHsKICAgICAgICAgIHNlcmllLm5hbWUgPSB0aGlzLmVkaXRlZFNlcmllLm5hbWU7CiAgICAgICAgICBzZXJpZS5jb2xvciA9IHRoaXMuZWRpdGVkU2VyaWUuY29sb3I7CiAgICAgICAgICBzZXJpZS5lbGVtZW50cyA9IHRoaXMuZWRpdGVkU2VyaWUuZWxlbWVudHM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzZXJpZTsKICAgICAgfSk7CiAgICAgIHRoaXMuY2xvc2VNZW51U2VyaWVzKCk7CiAgICB9LAoKICAgIGFzeW5jIGxvYWRTZXJpZShzZXJpZSkgewogICAgICAvL1RPRE8KCiAgICAgIHRoaXMuZWRpdGVkU2VyaWUuaWQgPSBzZXJpZS5pZDsKICAgICAgY29uc29sZS5sb2coJ2VkaXRlZFNlcmllOiAnLCB0aGlzLmVkaXRlZFNlcmllKTsKICAgICAgY29uc3QgcnNwID0gYXdhaXQgdGhpcy5sb2FkUHJvamVjdHMoKTsKICAgICAgdGhpcy5lZGl0ZWRTZXJpZS5lbGVtZW50cy5wcm9qZWN0ID0gc2VyaWUuZWxlbWVudHMucHJvamVjdDsKCiAgICAgIHRoaXMuZ3JwRGlzID0gZmFsc2U7CiAgICAgIGNvbnN0IHJzZyA9IGF3YWl0IHRoaXMubG9hZEdyb3VwcygpOwogICAgICB0aGlzLmVkaXRlZFNlcmllLmVsZW1lbnRzLmdyb3VwID0gc2VyaWUuZWxlbWVudHMuZ3JvdXA7CgogICAgICB0aGlzLmRldkRpcyA9IGZhbHNlOwogICAgICBjb25zdCByc2QgPSBhd2FpdCB0aGlzLmxvYWREZXZpY2VzKCk7CiAgICAgIHRoaXMuZWRpdGVkU2VyaWUuZWxlbWVudHMuZGV2aWNlID0gc2VyaWUuZWxlbWVudHMuZGV2aWNlOwoKICAgICAgdGhpcy5zZW5EaXMgPSBmYWxzZTsKICAgICAgY29uc3QgcnNzID0gYXdhaXQgdGhpcy5sb2FkU2Vuc29ycygpOwogICAgICB0aGlzLmVkaXRlZFNlcmllLmVsZW1lbnRzLnNlbnNvciA9IHNlcmllLmVsZW1lbnRzLnNlbnNvcjsKCiAgICAgIHRoaXMuZWRpdGVkU2VyaWUubmFtZSA9IHNlcmllLm5hbWU7CiAgICAgIHRoaXMuZWRpdGVkU2VyaWUuY29sb3IgPSBzZXJpZS5jb2xvcjsKICAgICAgdGhpcy5tZW51Q2hhcnRzID0gdHJ1ZTsKICAgICAgdGhpcy5lZGl0U2VyaWVNb2RlID0gdHJ1ZTsKCiAgICAgIC8vdGhpcy5jbG9zZU1lbnVTZXJpZXMoKTsKICAgIH0sCgogICAgZGVsZXRlU2VyaWUoc2VyaWUpIHsKICAgICAgdGhpcy5zZXJpZXNDaGFydCA9IHRoaXMuc2VyaWVzQ2hhcnQuZmlsdGVyKChzKSA9PiB7CiAgICAgICAgcmV0dXJuIHNlcmllLmlkICE9PSBzLmlkOwogICAgICB9KTsKCiAgICAgIHRoaXMuY2xvc2VNZW51U2VyaWVzKCk7CiAgICB9LAoKICAgIGNsb3NlTWVudVNlcmllcygpIHsKICAgICAgdGhpcy5tZW51Q2hhcnRzID0gZmFsc2U7CiAgICAgIHRoaXMuZWRpdFNlcmllTW9kZSA9IGZhbHNlOwogICAgICB0aGlzLmVkaXRlZFNlcmllID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0U2VyaWUpOwogICAgICB0aGlzLmVkaXRlZFNlcmllLmVsZW1lbnRzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0U2VyaWUuZWxlbWVudHMpOwogICAgfSwKCiAgICBlZGl0Q2hhcnQoaXRlbSkgewogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gdGhpcy5jaGFydHMuY2hhcnRMaXN0LmluZGV4T2YoaXRlbSk7CiAgICAgIHRoaXMuZWRpdGVkQ2hhcnQgPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKTsKICAgICAgdGhpcy5zZXJpZXNDaGFydCA9IGl0ZW0uc2VyaWVzOwogICAgICB0aGlzLmVkaXRNb2RlID0gdHJ1ZTsKICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlOwogICAgfSwKCiAgICBkZWxldGVDaGFydChjaGFydCkgewogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gdGhpcy5jaGFydHMuY2hhcnRMaXN0LmluZGV4T2YoY2hhcnQpOwogICAgICB0aGlzLmVkaXRlZENoYXJ0ID0gY2hhcnQ7CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gdHJ1ZTsKICAgIH0sCgogICAgYXN5bmMgZGVsZXRlSXRlbUNvbmZpcm0oKSB7CiAgICAgIHRoaXMuY2FyZ2FuZG8gPSB0cnVlOwogICAgICBjb25zdCBwYXJhbXMgPSBbdGhpcy5lZGl0ZWRDaGFydF07CiAgICAgIHBhcmFtcy5wdXNoKHRoaXMudXNlcnMudXNlci5maXJlVUlEKTsKICAgICAgY29uc3QgcnMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2hhcnRzL2RlbGV0ZUNoYXJ0JywgcGFyYW1zKTsKICAgICAgY29uc29sZS5sb2coJ1tGaXJlc3RvcmUgUmVzcG9uc2VdIC0gJywgcnMpOwogICAgICB0aGlzLmNhcmdhbmRvID0gZmFsc2U7CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gZmFsc2U7CiAgICB9LAoKICAgIGNsb3NlKCkgewogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmNsb3NlTWVudVNlcmllcygpOwogICAgICB0aGlzLnNlcmllc0NoYXJ0ID0gW107CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmVkaXRlZENoYXJ0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0Q2hhcnQpOwogICAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSAtMTsKICAgICAgfSk7CiAgICB9LAoKICAgIGNsb3NlRGVsZXRlKCkgewogICAgICB0aGlzLmRpYWxvZ0RlbGV0ZSA9IGZhbHNlOwogICAgICB0aGlzLmNsb3NlTWVudVNlcmllcygpOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5lZGl0ZWRDaGFydCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdENoYXJ0KTsKICAgICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTE7CiAgICAgIH0pOwogICAgfSwKCiAgICBhc3luYyBjcmVhdGVDaGFydCgpIHsKICAgICAgLy8gRmlyc3QgY3JlYXRlIGEgc2VyaWVzIGRhdGEKICAgICAgbGV0IGNoYXJ0ID0ge307CiAgICAgIGNoYXJ0LmlkID0gdGhpcy5lZGl0TW9kZQogICAgICAgID8gdGhpcy5lZGl0ZWRDaGFydC5pZAogICAgICAgIDogJ2lkJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIpOwogICAgICBjaGFydC50eXBlID0gdGhpcy5lZGl0ZWRDaGFydC50eXBlOwogICAgICBjaGFydC5wZXJpb2QgPSB0aGlzLmVkaXRlZENoYXJ0LnBlcmlvZDsKICAgICAgY2hhcnQub3B0aW9ucyA9IHsKICAgICAgICBjaGFydDogewogICAgICAgICAgaWQ6IGNoYXJ0LmlkLAogICAgICAgIH0sCiAgICAgICAgZGF0YUxhYmVsczogewogICAgICAgICAgZW5hYmxlZDogZmFsc2UsCiAgICAgICAgfSwKICAgICAgICBzdHJva2U6IHsKICAgICAgICAgIGN1cnZlOiAnc21vb3RoJywKICAgICAgICB9LAogICAgICAgIHhheGlzOiB7CiAgICAgICAgICB0eXBlOiAnZGF0ZXRpbWUnLAogICAgICAgICAgbGFiZWxzOiB7CiAgICAgICAgICAgIC8vZm9ybWF0OiAneXl5eS1NTS1kZCBISDptbTpzcycgLAogICAgICAgICAgICAvLyBmb3JtYXR0ZXI6IGZ1bmN0aW9uICh0aW1lc3RhbXApIHsKICAgICAgICAgICAgLy8gICByZXR1cm4gbW9tZW50KG5ldyBEYXRlKHRpbWVzdGFtcCkpLmZvcm1hdCgnTU0tWVlZWScpOwogICAgICAgICAgICAvLyB9LAogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgIGZvbGxvd0N1cnNvcjogdHJ1ZSwKICAgICAgICAgIHRoZW1lOiAnbGlnaHQnLAogICAgICAgICAgeDogeyBmb3JtYXQ6ICd5eXl5LU1NLWRkIEhIOm1tOnNzJyB9LAogICAgICAgIH0sCiAgICAgICAgbWFya2VyczogewogICAgICAgICAgc2l6ZTogMiwKICAgICAgICB9LAogICAgICB9OwoKICAgICAgaWYgKGNoYXJ0LnBlcmlvZCA9PT0gJzMnKSB7CiAgICAgICAgY2hhcnQuZGF0ZVJlcSA9IHRoaXMuZWRpdGVkQ2hhcnQuZGF0ZVJlcTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGFydC5kYXRlUmVxID0gdGhpcy5jYWxjdWxhdGVEYXRlcyhjaGFydC5wZXJpb2QpOwogICAgICB9CgogICAgICBjaGFydC5zZXJpZXMgPSBbXTsKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoCiAgICAgICAgdGhpcy5zZXJpZXNDaGFydC5tYXAoYXN5bmMgKHNlcmllKSA9PiB7CiAgICAgICAgICBzZXJpZS5kYXRhID0gW107CiAgICAgICAgICAvLyBUT0RPIGdldCBBUElUT0tFTiBmcm9tIGRldmljZQogICAgICAgICAgbGV0IHBhcmFtcyA9IFsneHl0Vnh2REpTRDdRcXNlMVZPS2RkJ107CiAgICAgICAgICBwYXJhbXMucHVzaChzZXJpZS5lbGVtZW50cy5kZXZpY2UpOwogICAgICAgICAgcGFyYW1zLnB1c2goc2VyaWUuZWxlbWVudHMuc2Vuc29yKTsKICAgICAgICAgIHBhcmFtcy5wdXNoKGNoYXJ0LmRhdGVSZXFbMF0pOwogICAgICAgICAgcGFyYW1zLnB1c2goY2hhcnQuZGF0ZVJlcVsxXSk7CgogICAgICAgICAgY29uc3QgZHRhID0gYXdhaXQgdGhpcy5nZXREYXRhKHBhcmFtcyk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnUkVTU1NTUyAtPiAnLCBkdGEpOwogICAgICAgICAgaWYgKGR0YS5zZXJpZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRU86ICcsIGR0YS5zZXJpZXMpOwogICAgICAgICAgICAvLyBPbmx5IGNoZWNrIGZpcnN0IHNlcmllCiAgICAgICAgICAgIGNvbnN0IGRzID0gZHRhLnNlcmllc1swXTsKICAgICAgICAgICAgZHMuc2FtcGxlcy5mb3JFYWNoKChzKSA9PiB7CiAgICAgICAgICAgICAgc2VyaWUuZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgIC8veDogbmV3IERhdGUocy5kYXRlKS5nZXRUaW1lKCksCiAgICAgICAgICAgICAgICB4OiB1dGlscy5mb3JtYXREYXRlKG5ldyBEYXRlKHMuZGF0ZSkpLAogICAgICAgICAgICAgICAgeTogcy52YWx1ZSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBjaGFydC5zZXJpZXMucHVzaChzZXJpZSk7CiAgICAgICAgfSkKICAgICAgKTsKCiAgICAgIC8vY29uc29sZS5sb2coJ0NoYXJ0IGVudmlhZG8gJywgY2hhcnQpOwogICAgICBjb25zdCBwYXJhbXMgPSBbY2hhcnRdOwogICAgICBwYXJhbXMucHVzaCh0aGlzLnVzZXJzLnVzZXIuZmlyZVVJRCk7CiAgICAgIGNvbnN0IHJzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoYXJ0cy9hZGRDaGFydCcsIHBhcmFtcyk7CiAgICB9LAoKICAgIGNhbGN1bGF0ZURhdGVzKHBlcmlvZCkgewogICAgICBsZXQgZGF0ZUZyb20gPSAnJzsKICAgICAgbGV0IGRhdGVUbyA9ICcnOwogICAgICBsZXQgZGF0ZU9mZnNldERheSA9IDI0ICogNjAgKiA2MCAqIDEwMDA7CgogICAgICBpZiAocGVyaW9kID09PSAnMicpIHsKICAgICAgICAvLyBGcm9tIDEgd2VlayBhZ28KICAgICAgICBkYXRlT2Zmc2V0RGF5ICo9IDc7CiAgICAgICAgZGF0ZUZyb20gPSBuZXcgRGF0ZSgpOwogICAgICAgIGRhdGVGcm9tLnNldFRpbWUoZGF0ZUZyb20uZ2V0VGltZSgpIC0gZGF0ZU9mZnNldERheSk7CiAgICAgICAgZGF0ZVRvID0gJyc7CiAgICAgIH0gZWxzZSBpZiAocGVyaW9kID09PSAnMScpIHsKICAgICAgICAvLyBMYXN0IDI0IGhvdXJzCiAgICAgICAgZGF0ZUZyb20gPSBuZXcgRGF0ZSgpOwogICAgICAgIGRhdGVGcm9tLnNldFRpbWUoZGF0ZUZyb20uZ2V0VGltZSgpIC0gZGF0ZU9mZnNldERheSk7CiAgICAgICAgZGF0ZVRvID0gJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gMCBMYXN0IDI0SCBieSBkZWZhdWx0IE5vdGhpbmcgdG8gZG8KICAgICAgfQogICAgICAvL2NvbnNvbGUubG9nKCdMYXMgZmVjaGFzIEZST00tVE86ICcsIGRhdGVGcm9tLCAnICcsIGRhdGVUbyk7CiAgICAgIGNvbnN0IGRhdGVzID0gW2RhdGVGcm9tLCBkYXRlVG9dOwogICAgICByZXR1cm4gZGF0ZXM7CiAgICB9LAoKICAgIGFzeW5jIGdldENoYXJ0TGlzdEZpcmVCYXNlKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjaGFydHMvZ2V0Q2hhcnRzRmlyZUJhc2UnKTsKICAgICAgICAvL2NvbnNvbGUubG9nKCdSRVMgREFUQTogJywgcmVzKTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygnW0VSUk9SXSAtIGdldERhdGEnLCBlcnIubWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqICBQYXNzIG9iamVjdCB0byBxdWVyeSBmb3IgZGF0YQogICAgICogIGFwaVRva2VuICBwYXJhbXNbMF0KICAgICAqICBpZERldmljZSAgcGFyYW1zWzFdCiAgICAgKiAgaWRTZW5zb3IgIHBhcmFtc1syXQogICAgICogIGRhdGVGcm9tICBwYXJhbXNbM10gQ2FuIGJlIG51bGwKICAgICAqICBkYXRlVG8gICAgcGFyYW1zWzRdIENhbiBiZSBudWxsCiAgICAgKi8KICAgIGFzeW5jIGdldERhdGEocGFyYW1zKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoYXJ0cy9nZXREYXRhJywgcGFyYW1zKTsKICAgICAgICAvL2NvbnNvbGUubG9nKCdSRVMgREFUQTogJywgcmVzKTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygnW0VSUk9SXSAtIGdldERhdGEnLCBlcnIubWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgc2F2ZSgpIHsKICAgICAgdGhpcy5jYXJnYW5kbyA9IHRydWU7CiAgICAgIHRoaXMuY3JlYXRlQ2hhcnQoKTsKICAgICAgdGhpcy5jbG9zZU1lbnVTZXJpZXMoKTsKICAgICAgdGhpcy5zZXJpZXNDaGFydCA9IFtdOwogICAgICB0aGlzLmVkaXRlZENoYXJ0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0Q2hhcnQpOwogICAgICB0aGlzLmVkaXRNb2RlID0gZmFsc2U7CiAgICAgIHRoaXMuY2FyZ2FuZG8gPSBmYWxzZTsKICAgICAgdGhpcy5jbG9zZSgpOwogICAgfSwKCiAgICBhc3luYyBsb2FkUHJvamVjdHMoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLnVzZXJzLnVzZXIudG9rZW47CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Byb2plY3RzL2dldFByb2plY3RzJywgdG9rZW4pOwogICAgICAgIGlmIChyZXMuZGF0YS5wcm9qZWN0cykgewogICAgICAgICAgdGhpcy5wcm9JdGVtcyA9IHJlcy5kYXRhLnByb2plY3RzLm1hcCgocCkgPT4gewogICAgICAgICAgICByZXR1cm4geyB0ZXh0OiBwLm5hbWUsIHZhbHVlOiBwLl9pZCB9OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIC8vY29uc29sZS5sb2coJ1JFU1BVRVNUQTogJywgcmVzKTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygnW0VSUk9SXSAtIGxvYWRQcm9qZWN0czogJyArIGVyci5tZXNzYWdlKTsKICAgICAgfQogICAgfSwKCiAgICBsb2FkR3JvdXBzKCkgewogICAgICB0aGlzLmdycERpcyA9IGZhbHNlOwogICAgICB0aGlzLmRldkRpcyA9IHRydWU7CiAgICAgIHRoaXMuc2VuRGlzID0gdHJ1ZTsKICAgICAgdGhpcy5idG5EaXMgPSB0cnVlOwogICAgICB0aGlzLmdycEl0ZW1zID0gW107CiAgICAgIHRoaXMuZGV2SXRlbXMgPSBbXTsKCiAgICAgIHRoaXMucHJvamVjdHMucHJvamVjdExpc3QuZm9yRWFjaCgocCkgPT4gewogICAgICAgIGlmIChwLl9pZCA9PT0gdGhpcy5lZGl0ZWRTZXJpZS5lbGVtZW50cy5wcm9qZWN0KSB7CiAgICAgICAgICB0aGlzLmdycEl0ZW1zID0gcC5ncm91cHMubWFwKChnKSA9PiB7CiAgICAgICAgICAgIHJldHVybiB7IHRleHQ6IGcubmFtZSwgdmFsdWU6IGcuX2lkIH07CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBhc3luYyBsb2FkRGV2aWNlcygpIHsKICAgICAgdGhpcy5kZXZEaXMgPSBmYWxzZTsKICAgICAgdGhpcy5zZW5EaXMgPSB0cnVlOwogICAgICB0aGlzLmJ0bkRpcyA9IHRydWU7CiAgICAgIHRoaXMuc2VuSXRlbXMgPSBbXTsKCiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHBhcmFtcyA9IFt0aGlzLnVzZXJzLnVzZXIudG9rZW5dOwogICAgICAgIHBhcmFtcy5wdXNoKHRoaXMuZWRpdGVkU2VyaWUuZWxlbWVudHMucHJvamVjdCk7CiAgICAgICAgcGFyYW1zLnB1c2godGhpcy5lZGl0ZWRTZXJpZS5lbGVtZW50cy5ncm91cCk7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goCiAgICAgICAgICAnZGV2aWNlcy9nZXREZXZpY2VzR3JvdXAnLAogICAgICAgICAgcGFyYW1zCiAgICAgICAgKTsKCiAgICAgICAgLy9jb25zb2xlLmxvZygnREVWSUNFUzogJywgcmVzLCAncGFyYW1zOiAnLCBwYXJhbXMpOwogICAgICAgIGlmIChyZXMuZGF0YS5kZXZpY2VzKSB7CiAgICAgICAgICB0aGlzLmRldkl0ZW1zID0gcmVzLmRhdGEuZGV2aWNlcy5tYXAoKGQpID0+IHsKICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogZC5uYW1lLCB2YWx1ZTogZC5faWQgfTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygnW0VSUk9SXSAtIGxvYWREZXZpY2VzOiAnICsgZXJyLm1lc3NhZ2UpOwogICAgICB9CiAgICB9LAoKICAgIHRvRW5hQnRuKCkgewogICAgICB0aGlzLmJ0bkRpcyA9IGZhbHNlOwogICAgfSwKCiAgICBhc3luYyBsb2FkU2Vuc29ycygpIHsKICAgICAgdGhpcy5lZGl0ZWRTZXJpZS5lbGVtZW50cy5zZW5zb3IgPSAnJzsKICAgICAgdGhpcy5zZW5EaXMgPSBmYWxzZTsKICAgICAgdGhpcy5idG5EaXMgPSB0cnVlOwoKICAgICAgdHJ5IHsKICAgICAgICBsZXQgcGFyYW1zID0gW3RoaXMudXNlcnMudXNlci50b2tlbl07CiAgICAgICAgcGFyYW1zLnB1c2godGhpcy5lZGl0ZWRTZXJpZS5lbGVtZW50cy5wcm9qZWN0KTsKICAgICAgICBwYXJhbXMucHVzaCh0aGlzLmVkaXRlZFNlcmllLmVsZW1lbnRzLmdyb3VwKTsKICAgICAgICBwYXJhbXMucHVzaCh0aGlzLmVkaXRlZFNlcmllLmVsZW1lbnRzLmRldmljZSk7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2RldmljZXMvZ2V0RGV2aWNlJywgcGFyYW1zKTsKICAgICAgICBpZiAocmVzLmRhdGEuZGV2aWNlLnNlbnNvcnMpIHsKICAgICAgICAgIHRoaXMuc2VuSXRlbXMgPSByZXMuZGF0YS5kZXZpY2Uuc2Vuc29ycy5tYXAoKHMpID0+IHsKICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogcy5uYW1lLCB2YWx1ZTogcy5faWQgfTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAvL2NvbnNvbGUubG9nKCdERVZJQ0U6ICcsIHJlcywgJ2l0ZW1zOiAnLCB0aGlzLnNlbkl0ZW1zKTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygnW0VSUk9SXSAtIGxvYWREZXZpY2VzOiAnICsgZXJyLm1lc3NhZ2UpOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICogIFVwbG9hZHMgY2hhcnRsaXN0IG9uIGZpcmViYXNlIGRhdGFiYXNlCiAgICAgKi8KICAgIGFzeW5jIHVwbG9hZENoYXJ0TGlzdCgpIHsKICAgICAgY29uc3QgcGFyYW1zID0gW3RoaXMudXNlcnMudXNlci5maXJlVUlEXTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBycyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKAogICAgICAgICAgJ2NoYXJ0cy91cGRhdGVDaGFydGZpcmVCYXNlJywKICAgICAgICAgIHBhcmFtcwogICAgICAgICk7CiAgICAgICAgY29uc29sZS5sb2coJ1t1cGxvYWRDaGFydExpc3RdIC0gRE9ORScpOwogICAgICAgIHJldHVybiByczsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1tFUlJPUl0gLSB1cGxvYWRDaGFydExpc3Q6ICcgKyBlcnIubWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCiAgfSwKCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGNvbnN0IHByaiA9IGF3YWl0IHRoaXMubG9hZFByb2plY3RzKCk7CiAgfSwKfTsK"},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsWA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"mt-2\">\n    <Loading :loading=\"cargando\"></Loading>\n    <Title\n      :title=\"'Dashboard'\"\n      :color=\"'secondary--text'\"\n      :path=\"'Home / dashboard'\"\n    ></Title>\n\n    <v-row>\n      <v-col cols=\"12\" md=\"4\" sm=\"6\">\n        <v-card class=\"pa-4 text-center\" outlined tile>\n          <apexchart\n            type=\"area\"\n            :options=\"options\"\n            :series=\"series\"\n          ></apexchart>\n        </v-card>\n      </v-col>\n      <v-col cols=\"12\" md=\"4\" sm=\"6\">\n        <v-card class=\"pa-4 text-center\" outlined tile>\n          <apexchart\n            type=\"line\"\n            :options=\"options\"\n            :series=\"series\"\n          ></apexchart>\n        </v-card>\n      </v-col>\n      <v-col cols=\"12\" md=\"4\" sm=\"6\">\n        <v-card class=\"pa-4 text-center\" outlined tile>\n          <apexchart\n            type=\"bar\"\n            :options=\"optionsA\"\n            :series=\"seriesA\"\n          ></apexchart>\n        </v-card>\n      </v-col>\n      <v-col\n        cols=\"12\"\n        md=\"4\"\n        sm=\"6\"\n        v-for=\"chart in charts.chartList\"\n        :key=\"chart.id\"\n      >\n        <v-card class=\"pa-4 text-center\" outlined tile>\n          <apexchart\n            :type=\"chart.type\"\n            :options=\"chart.options\"\n            :series=\"chart.series\"\n          ></apexchart>\n          <v-card-text>\n            <v-icon\n              class=\"mr-2\"\n              color=\"warning\"\n              @click=\"editChart(chart)\"\n              title=\"Editar\"\n              size=\"20\"\n            >\n              fas fa-pencil-alt\n            </v-icon>\n            <v-icon\n              color=\"error\"\n              @click=\"deleteChart(chart)\"\n              title=\"Eliminar\"\n              size=\"20\"\n            >\n              fas fa-trash\n            </v-icon>\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n    <v-row class=\"flex-row-reverse\">\n      <v-dialog\n        v-model=\"dialog\"\n        persistent\n        max-width=\"1500px\"\n        max-height=\"1500px\"\n      >\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn\n            color=\"primary\"\n            dark\n            elevation=\"8\"\n            fab\n            class=\"mt-15 mr-5\"\n            v-bind=\"attrs\"\n            v-on=\"on\"\n          >\n            <v-icon>fas fa-plus</v-icon>\n          </v-btn>\n        </template>\n        <v-form v-model=\"isFormValid\">\n          <v-card class=\"pa-5\">\n            <v-card-title>\n              <span class=\"text-h5\">Nuevo gráfico</span>\n            </v-card-title>\n            <v-card-text>\n              <v-container>\n                <v-row class=\"pa-2\">\n                  <v-col cols=\"12\" sm=\"4\">\n                    <v-radio-group v-model=\"editedChart.type\" mandatory>\n                      <v-radio label=\"Line\" value=\"line\"></v-radio>\n                      <v-icon color=\"primary\" size=\"80\" class=\"mb-2\"\n                        >mdi-chart-line</v-icon\n                      >\n                      <v-radio label=\"Bar\" value=\"bar\"></v-radio>\n                      <v-icon color=\"success\" size=\"80\" class=\"mb-2\"\n                        >mdi-chart-bar</v-icon\n                      >\n                      <v-radio label=\"Pie\" value=\"pie\"></v-radio>\n                      <v-icon color=\"warning\" size=\"80\" class=\"mb-2\"\n                        >mdi-chart-pie</v-icon\n                      >\n                      <v-radio label=\"Area\" value=\"area\"></v-radio>\n                      <v-icon color=\"purple\" size=\"80\" class=\"mb-2\"\n                        >mdi-chart-areaspline</v-icon\n                      >\n                    </v-radio-group>\n                  </v-col>\n                  <v-col cols=\"12\" sm=\"4\" class=\"justify-conten\">\n                    <span class=\"text-h6 font-weight-light\"\n                      >Periodo de las series</span\n                    >\n                    <v-radio-group v-model=\"editedChart.period\" mandatory>\n                      <v-radio label=\"1h\" value=\"0\"></v-radio>\n                      <v-radio label=\"24h\" value=\"1\"></v-radio>\n                      <v-radio label=\"Última semana\" value=\"2\"></v-radio>\n                      <v-radio label=\"Entre fechas\" value=\"3\"></v-radio>\n                    </v-radio-group>\n                    <v-menu\n                      ref=\"menu\"\n                      v-model=\"menu\"\n                      :close-on-content-click=\"false\"\n                      :return-value.sync=\"editedChart.dateReq\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"auto\"\n                    >\n                      <template v-slot:activator=\"{ on, attrs }\">\n                        <v-text-field\n                          v-model=\"editedChart.dateReq\"\n                          label=\"Rango de fechas\"\n                          prepend-icon=\"far fa-calendar alt\"\n                          readonly\n                          v-bind=\"attrs\"\n                          v-on=\"on\"\n                          :disabled=\"editedChart.period !== '3'\"\n                          class=\"mb-5 pr-10\"\n                        ></v-text-field>\n                      </template>\n                      <v-date-picker\n                        v-model=\"editedChart.dateReq\"\n                        range\n                        no-title\n                        scrollable\n                      >\n                        <v-spacer></v-spacer>\n                        <v-btn text color=\"primary\" @click=\"menu = false\">\n                          Cancel\n                        </v-btn>\n                        <v-btn\n                          text\n                          color=\"primary\"\n                          @click=\"\n                            $refs.menu.save(editedChart.dateReq);\n                            toEnaBtn();\n                          \"\n                        >\n                          OK\n                        </v-btn>\n                      </v-date-picker>\n                    </v-menu>\n                    <span class=\"text-h6 font-weight-light\"\n                      >Series del gráfico\n                    </span>\n                    <span class=\"ml-2\">\n                      <small v-if=\"seriesChart.length === 0\"\n                        >No hay series</small\n                      >\n                    </span>\n                    <v-btn\n                      small\n                      color=\"primary\"\n                      dark\n                      elevation=\"8\"\n                      fab\n                      class=\"ml-5\"\n                      @click=\"menuCharts = true\"\n                      v-if=\"!menuCharts\"\n                      :disabled=\"seriesChart.length === 3\"\n                    >\n                      <v-icon small>fas fa-plus</v-icon>\n                    </v-btn>\n                    <small\n                      class=\"ml-2\"\n                      v-if=\"!menuCharts && seriesChart.length !== 3\"\n                      >Añade una serie (Máximo 3)</small\n                    >\n\n                    <v-list shaped class=\"mt-5\">\n                      <v-list-item-group color=\"primary\">\n                        <v-list-item\n                          v-for=\"(serie, id) in seriesChart\"\n                          :key=\"id\"\n                          :color=\"serie.color\"\n                        >\n                          <v-icon :color=\"serie.color\" class=\"mr-5\" size=\"25\"\n                            >mdi-chart-timeline-variant</v-icon\n                          >\n                          <v-list-item-content>\n                            <v-list-item-title\n                              v-text=\"serie.name\"\n                            ></v-list-item-title>\n                          </v-list-item-content>\n                          <v-list-item-icon>\n                            <v-btn small fab @click=\"loadSerie(serie)\">\n                              <v-icon color=\"success\">mdi-pencil-circle</v-icon>\n                            </v-btn>\n                            <v-btn\n                              small\n                              fab\n                              @click=\"deleteSerie(serie)\"\n                              class=\"ml-2\"\n                            >\n                              <v-icon color=\"red\"\n                                >mdi-delete-circle-outline</v-icon\n                              >\n                            </v-btn>\n                          </v-list-item-icon>\n                        </v-list-item>\n                      </v-list-item-group>\n                    </v-list>\n                  </v-col>\n\n                  <v-col cols=\"12\" sm=\"4\" class=\"justify-content\">\n                    <div v-if=\"menuCharts\">\n                      <v-select\n                        :items=\"proItems\"\n                        dense\n                        label=\"Elige un proyecto\"\n                        v-model=\"editedSerie.elements.project\"\n                        @input=\"loadGroups\"\n                        class=\"mt-5\"\n                      ></v-select>\n                      <v-select\n                        ref=\"grpMenu\"\n                        :items=\"grpItems\"\n                        dense\n                        label=\"Elige un grupo\"\n                        v-model=\"editedSerie.elements.group\"\n                        :disabled=\"grpDis\"\n                        @input=\"loadDevices\"\n                        class=\"mt-5\"\n                      ></v-select>\n                      <v-select\n                        :items=\"devItems\"\n                        dense\n                        label=\"Elige un dispositivo\"\n                        v-model=\"editedSerie.elements.device\"\n                        :disabled=\"devDis\"\n                        @input=\"loadSensors\"\n                        class=\"mt-5\"\n                      ></v-select>\n                      <v-select\n                        :items=\"senItems\"\n                        dense\n                        label=\"Elige los sensores\"\n                        chips\n                        v-model=\"editedSerie.elements.sensor\"\n                        :disabled=\"devDis\"\n                        class=\"mt-5\"\n                      >\n                      </v-select>\n                      <v-text-field\n                        label=\"Nombre de la serie\"\n                        v-model=\"editedSerie.name\"\n                        :rules=\"rules.name\"\n                        :disabled=\"editedSerie.elements.sensor === ''\"\n                        required\n                      ></v-text-field>\n                      <span\n                        v-if=\"editedSerie.name !== ''\"\n                        class=\"mt-10 text-h7 font-weight-light\"\n                        >Color de la serie\n                      </span>\n                      <v-color-picker\n                        v-if=\"editedSerie.name !== ''\"\n                        v-model=\"editedSerie.color\"\n                        class=\"ma-2\"\n                        hide-canvas\n                      ></v-color-picker>\n                      <v-card-actions>\n                        <v-spacer></v-spacer>\n                        <v-btn\n                          icon\n                          color=\"success\"\n                          @click=\"addSerie()\"\n                          :disabled=\"editedSerie.elements.sensor === ''\"\n                          v-if=\"!editSerieMode\"\n                        >\n                          <v-icon>mdi-plus-thick</v-icon>\n                        </v-btn>\n                        <v-btn\n                          icon\n                          color=\"success\"\n                          @click=\"updateSerie()\"\n                          :disabled=\"editedSerie.elements.sensor === ''\"\n                          v-if=\"editSerieMode\"\n                        >\n                          <v-icon>mdi-check</v-icon>\n                        </v-btn>\n                        <v-btn icon color=\"red\" @click=\"closeMenuSeries\">\n                          <v-icon>mdi-export</v-icon>\n                        </v-btn>\n                      </v-card-actions>\n                    </div>\n                  </v-col>\n                  <v-col cols=\"12\" v-if=\"menuCharts\"> </v-col>\n                </v-row>\n              </v-container>\n            </v-card-text>\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn color=\"blue darken-1\" text @click=\"close\"> Close </v-btn>\n              <v-btn\n                color=\"blue darken-1\"\n                text\n                @click=\"save()\"\n                :disabled=\"!isFormValid\"\n              >\n                Save\n              </v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-form>\n      </v-dialog>\n      <v-dialog v-model=\"dialogDelete\" max-width=\"500px\">\n        <v-card>\n          <v-card-title class=\"text-h5\"\n            >¿Estás seguro de eliminar este elemento?</v-card-title\n          >\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"blue darken-1\" text @click=\"closeDelete\"\n              >Cancel</v-btn\n            >\n            <v-btn color=\"blue darken-1\" text @click=\"deleteItemConfirm\"\n              >OK</v-btn\n            >\n            <v-spacer></v-spacer>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-row>\n  </div>\n</template>\n<script>\nimport Title from '@/components/Title';\nimport utils from '@/plugins/utils';\nimport Loading from '@/components/Loading';\nimport VueApexCharts from 'vue-apexcharts';\nimport ApexCharts from 'apexcharts';\nimport { mapState, mapActions } from 'vuex';\n//import moment from 'moment';\n\nexport default {\n  name: 'Dashboard',\n  mounted: function () {\n    window.setInterval(() => {\n      this.reloadCharts();\n      //this.timeSeries();\n    }, 200000);\n  },\n\n  data() {\n    return {\n      // Form data\n      dialog: false,\n      dialogDelete: false,\n      menuCharts: false,\n      cargando: false,\n      editMode: false,\n      editSerieMode: false,\n\n      // Charts data\n      editedIndex: -1,\n      editedChart: {\n        id: '',\n        type: '',\n        period: '0',\n        dateReq: [],\n        options: '',\n        series: '',\n      },\n      defaultChart: {\n        id: '',\n        type: '',\n        period: '0',\n        dateReq: [],\n        options: '',\n        series: '',\n      },\n      seriesChart: [],\n      editedSerie: {\n        id: '',\n        name: '',\n        color: '',\n        data: [],\n        elements: {\n          project: '',\n          group: '',\n          device: '',\n          sensor: '',\n        },\n      },\n      defaultSerie: {\n        id: '',\n        name: '',\n        color: '',\n        data: [],\n        elements: {\n          project: '',\n          group: '',\n          device: '',\n          sensor: '',\n        },\n      },\n\n      // Rules from\n      rules: {\n        name: [\n          (v) => !!v || 'El campo es requerido',\n          (v) =>\n            (v && v.length >= 3 && v.length <= 40) ||\n            'La nombre debe tener entre 3 y 40 caracteres',\n        ],\n      },\n      isFormValid: false,\n      proItems: [],\n      grpItems: [],\n      devItems: [],\n      senItems: [],\n      datItems: [],\n\n      menu: false,\n      grpDis: true,\n      devDis: true,\n      senDis: true,\n      btnDis: true,\n\n      options: {\n        chart: {\n          id: 'vuechart-example',\n        },\n        stroke: {\n          curve: 'smooth',\n        },\n        xaxis: {\n          categories: [1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998],\n        },\n        markers: {\n          size: 0,\n        },\n      },\n      series: [\n        {\n          name: 'series-1',\n          color: '#FF00FF',\n          data: [30, 40, 45, 50, 49, 60, 70, 91],\n        },\n        {\n          name: 'series-2',\n          data: [10, 20, 25, 65, 21, 30, 55, 60],\n        },\n      ],\n\n      optionsA: {\n        chart: {\n          id: 'vuechart-example00',\n        },\n        stroke: {\n          curve: 'smooth',\n        },\n        markers: {\n          size: 2,\n        },\n        dataLabels: {\n          enabled: false,\n        },\n        xaxis: {\n          type: 'datetime',\n          //tickPlacement: 'between',\n          categories: [\n            '19 Jun 2017 02:30:00',\n            '19 Jun 2017 03:30:00',\n            '19 Jun 2017 04:30:00',\n            '19 Jun 2017 05:30:00',\n            '19 Jun 2017 06:30:00',\n            '19 Jun 2017 07:30:00',\n            '19 Jun 2017 08:30:00',\n          ],\n          axisTicks: {\n            show: false,\n          },\n          axisBorder: {\n            show: true,\n            borderType: 'dotted',\n          },\n          tooltip: {\n            enabled: false,\n          },\n          range: 7,\n        },\n        tooltip: {\n          followCursor: true,\n          theme: 'dark',\n          x: { format: 'yyyy-MM-dd HH:mm:ss' },\n        },\n      },\n      seriesA: [\n        {\n          name: 'series-1',\n          data: [31, 40, 28, 51, 42, 109, 100],\n        },\n        {\n          name: 'series-2',\n          data: [11, 32, 45, 32, 34, 52, 41],\n        },\n      ],\n    };\n  },\n  components: {\n    Title,\n    Loading,\n  },\n  computed: {\n    ...mapState(['projects', 'users', 'devices', 'charts']),\n  },\n  watch: {\n    dialog(val) {\n      val || this.close();\n    },\n    dialogDelete(val) {\n      val || this.closeDelete();\n    },\n  },\n\n  methods: {\n    /**\n     * Realoads chart list with the last data on database\n     * Only charts with periods 1H or 24H (last hour or last 24 hours)\n     * will be updated.\n     */\n    async reloadCharts() {\n      console.log('[RELOADING CHARTS .... ]');\n      let isData = false;\n      const charts = this.charts.chartList.filter((chart) => {\n        return chart.period !== 3;\n      });\n\n      await Promise.all(\n        charts.map(async (chart) => {\n          chart.series.map(async (serie) => {\n            //serie.data = [];\n\n            // TODO get APITOKEN from device\n            let params = ['xytVxvDJSD7Qqse1VOKdd'];\n            params.push(serie.elements.device);\n            params.push(serie.elements.sensor);\n            params.push(chart.dateReq[0]);\n            params.push(chart.dateReq[1]);\n\n            const dta = await this.getData(params);\n            if (dta.series.length > 0) {\n              // Only check first serie\n              const ds = dta.series[0];\n              isData = true;\n              ds.samples.forEach((s) => {\n                serie.data.push({\n                  x: utils.formatDate(new Date(s.date)),\n                  y: s.value,\n                });\n              });\n            } \n\n            //chart.series.push(serie);\n            //console.log('SERIE DATA: ', serie.data);\n            // ApexCharts.exec(serie.id, 'updateSeries', [{ data: serie.data }]);\n          });\n        })\n      );\n      if (charts.length > 0 && isData) {\n        await this.uploadChartList();\n      } else {\n        console.log('[NO DATA!!]');\n      }\n    },\n\n    addSerie() {\n      this.editedSerie.id = 'id' + Math.random().toString(16).slice(2);\n      this.editedSerie.data = [];\n      this.seriesChart.push(this.editedSerie);\n      this.closeMenuSeries();\n    },\n\n    updateSerie() {\n      console.log('[UpdateSerie]', this.editedSerie);\n\n      this.seriesChart = this.seriesChart.map((serie) => {\n        if (serie.id === this.editedSerie.id) {\n          serie.name = this.editedSerie.name;\n          serie.color = this.editedSerie.color;\n          serie.elements = this.editedSerie.elements;\n        }\n        return serie;\n      });\n      this.closeMenuSeries();\n    },\n\n    async loadSerie(serie) {\n      //TODO\n\n      this.editedSerie.id = serie.id;\n      console.log('editedSerie: ', this.editedSerie);\n      const rsp = await this.loadProjects();\n      this.editedSerie.elements.project = serie.elements.project;\n\n      this.grpDis = false;\n      const rsg = await this.loadGroups();\n      this.editedSerie.elements.group = serie.elements.group;\n\n      this.devDis = false;\n      const rsd = await this.loadDevices();\n      this.editedSerie.elements.device = serie.elements.device;\n\n      this.senDis = false;\n      const rss = await this.loadSensors();\n      this.editedSerie.elements.sensor = serie.elements.sensor;\n\n      this.editedSerie.name = serie.name;\n      this.editedSerie.color = serie.color;\n      this.menuCharts = true;\n      this.editSerieMode = true;\n\n      //this.closeMenuSeries();\n    },\n\n    deleteSerie(serie) {\n      this.seriesChart = this.seriesChart.filter((s) => {\n        return serie.id !== s.id;\n      });\n\n      this.closeMenuSeries();\n    },\n\n    closeMenuSeries() {\n      this.menuCharts = false;\n      this.editSerieMode = false;\n      this.editedSerie = Object.assign({}, this.defaultSerie);\n      this.editedSerie.elements = Object.assign({}, this.defaultSerie.elements);\n    },\n\n    editChart(item) {\n      this.editedIndex = this.charts.chartList.indexOf(item);\n      this.editedChart = Object.assign({}, item);\n      this.seriesChart = item.series;\n      this.editMode = true;\n      this.dialog = true;\n    },\n\n    deleteChart(chart) {\n      this.editedIndex = this.charts.chartList.indexOf(chart);\n      this.editedChart = chart;\n      this.dialogDelete = true;\n    },\n\n    async deleteItemConfirm() {\n      this.cargando = true;\n      const params = [this.editedChart];\n      params.push(this.users.user.fireUID);\n      const rs = await this.$store.dispatch('charts/deleteChart', params);\n      console.log('[Firestore Response] - ', rs);\n      this.cargando = false;\n      this.dialogDelete = false;\n    },\n\n    close() {\n      this.dialog = false;\n      this.closeMenuSeries();\n      this.seriesChart = [];\n      this.$nextTick(() => {\n        this.editedChart = Object.assign({}, this.defaultChart);\n        this.editedIndex = -1;\n      });\n    },\n\n    closeDelete() {\n      this.dialogDelete = false;\n      this.closeMenuSeries();\n      this.$nextTick(() => {\n        this.editedChart = Object.assign({}, this.defaultChart);\n        this.editedIndex = -1;\n      });\n    },\n\n    async createChart() {\n      // First create a series data\n      let chart = {};\n      chart.id = this.editMode\n        ? this.editedChart.id\n        : 'id' + Math.random().toString(16).slice(2);\n      chart.type = this.editedChart.type;\n      chart.period = this.editedChart.period;\n      chart.options = {\n        chart: {\n          id: chart.id,\n        },\n        dataLabels: {\n          enabled: false,\n        },\n        stroke: {\n          curve: 'smooth',\n        },\n        xaxis: {\n          type: 'datetime',\n          labels: {\n            //format: 'yyyy-MM-dd HH:mm:ss' ,\n            // formatter: function (timestamp) {\n            //   return moment(new Date(timestamp)).format('MM-YYYY');\n            // },\n          },\n        },\n        tooltip: {\n          followCursor: true,\n          theme: 'light',\n          x: { format: 'yyyy-MM-dd HH:mm:ss' },\n        },\n        markers: {\n          size: 2,\n        },\n      };\n\n      if (chart.period === '3') {\n        chart.dateReq = this.editedChart.dateReq;\n      } else {\n        chart.dateReq = this.calculateDates(chart.period);\n      }\n\n      chart.series = [];\n      await Promise.all(\n        this.seriesChart.map(async (serie) => {\n          serie.data = [];\n          // TODO get APITOKEN from device\n          let params = ['xytVxvDJSD7Qqse1VOKdd'];\n          params.push(serie.elements.device);\n          params.push(serie.elements.sensor);\n          params.push(chart.dateReq[0]);\n          params.push(chart.dateReq[1]);\n\n          const dta = await this.getData(params);\n          // console.log('RESSSSS -> ', dta);\n          if (dta.series.length > 0) {\n            // console.log('EO: ', dta.series);\n            // Only check first serie\n            const ds = dta.series[0];\n            ds.samples.forEach((s) => {\n              serie.data.push({\n                //x: new Date(s.date).getTime(),\n                x: utils.formatDate(new Date(s.date)),\n                y: s.value,\n              });\n            });\n          }\n          chart.series.push(serie);\n        })\n      );\n\n      //console.log('Chart enviado ', chart);\n      const params = [chart];\n      params.push(this.users.user.fireUID);\n      const rs = await this.$store.dispatch('charts/addChart', params);\n    },\n\n    calculateDates(period) {\n      let dateFrom = '';\n      let dateTo = '';\n      let dateOffsetDay = 24 * 60 * 60 * 1000;\n\n      if (period === '2') {\n        // From 1 week ago\n        dateOffsetDay *= 7;\n        dateFrom = new Date();\n        dateFrom.setTime(dateFrom.getTime() - dateOffsetDay);\n        dateTo = '';\n      } else if (period === '1') {\n        // Last 24 hours\n        dateFrom = new Date();\n        dateFrom.setTime(dateFrom.getTime() - dateOffsetDay);\n        dateTo = '';\n      } else {\n        // 0 Last 24H by default Nothing to do\n      }\n      //console.log('Las fechas FROM-TO: ', dateFrom, ' ', dateTo);\n      const dates = [dateFrom, dateTo];\n      return dates;\n    },\n\n    async getChartListFireBase() {\n      try {\n        const res = await this.$store.dispatch('charts/getChartsFireBase');\n        //console.log('RES DATA: ', res);\n        return res;\n      } catch (err) {\n        console.log('[ERROR] - getData', err.message);\n      }\n    },\n    /**\n     *  Pass object to query for data\n     *  apiToken  params[0]\n     *  idDevice  params[1]\n     *  idSensor  params[2]\n     *  dateFrom  params[3] Can be null\n     *  dateTo    params[4] Can be null\n     */\n    async getData(params) {\n      try {\n        const res = await this.$store.dispatch('charts/getData', params);\n        //console.log('RES DATA: ', res);\n        return res;\n      } catch (err) {\n        console.log('[ERROR] - getData', err.message);\n      }\n    },\n\n    async save() {\n      this.cargando = true;\n      this.createChart();\n      this.closeMenuSeries();\n      this.seriesChart = [];\n      this.editedChart = Object.assign({}, this.defaultChart);\n      this.editMode = false;\n      this.cargando = false;\n      this.close();\n    },\n\n    async loadProjects() {\n      try {\n        const token = this.users.user.token;\n        const res = await this.$store.dispatch('projects/getProjects', token);\n        if (res.data.projects) {\n          this.proItems = res.data.projects.map((p) => {\n            return { text: p.name, value: p._id };\n          });\n        }\n        //console.log('RESPUESTA: ', res);\n        return res;\n      } catch (err) {\n        console.log('[ERROR] - loadProjects: ' + err.message);\n      }\n    },\n\n    loadGroups() {\n      this.grpDis = false;\n      this.devDis = true;\n      this.senDis = true;\n      this.btnDis = true;\n      this.grpItems = [];\n      this.devItems = [];\n\n      this.projects.projectList.forEach((p) => {\n        if (p._id === this.editedSerie.elements.project) {\n          this.grpItems = p.groups.map((g) => {\n            return { text: g.name, value: g._id };\n          });\n        }\n      });\n    },\n\n    async loadDevices() {\n      this.devDis = false;\n      this.senDis = true;\n      this.btnDis = true;\n      this.senItems = [];\n\n      try {\n        let params = [this.users.user.token];\n        params.push(this.editedSerie.elements.project);\n        params.push(this.editedSerie.elements.group);\n        const res = await this.$store.dispatch(\n          'devices/getDevicesGroup',\n          params\n        );\n\n        //console.log('DEVICES: ', res, 'params: ', params);\n        if (res.data.devices) {\n          this.devItems = res.data.devices.map((d) => {\n            return { text: d.name, value: d._id };\n          });\n        }\n        return res;\n      } catch (err) {\n        console.log('[ERROR] - loadDevices: ' + err.message);\n      }\n    },\n\n    toEnaBtn() {\n      this.btnDis = false;\n    },\n\n    async loadSensors() {\n      this.editedSerie.elements.sensor = '';\n      this.senDis = false;\n      this.btnDis = true;\n\n      try {\n        let params = [this.users.user.token];\n        params.push(this.editedSerie.elements.project);\n        params.push(this.editedSerie.elements.group);\n        params.push(this.editedSerie.elements.device);\n        const res = await this.$store.dispatch('devices/getDevice', params);\n        if (res.data.device.sensors) {\n          this.senItems = res.data.device.sensors.map((s) => {\n            return { text: s.name, value: s._id };\n          });\n        }\n        //console.log('DEVICE: ', res, 'items: ', this.senItems);\n        return res;\n      } catch (err) {\n        console.log('[ERROR] - loadDevices: ' + err.message);\n      }\n    },\n\n    /**\n     *  Uploads chartlist on firebase database\n     */\n    async uploadChartList() {\n      const params = [this.users.user.fireUID];\n      try {\n        const rs = await this.$store.dispatch(\n          'charts/updateChartfireBase',\n          params\n        );\n        console.log('[uploadChartList] - DONE');\n        return rs;\n      } catch (err) {\n        console.log('[ERROR] - uploadChartList: ' + err.message);\n      }\n    },\n  },\n\n  async created() {\n    const prj = await this.loadProjects();\n  },\n};\n</script>\n\n<style></style>\n"]}]}
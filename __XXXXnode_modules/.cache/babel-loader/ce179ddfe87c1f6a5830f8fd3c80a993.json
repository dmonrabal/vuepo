{"remainingRequest":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/babel-loader/lib/index.js!/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/src/store/modules/users.js","dependencies":[{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/src/store/modules/users.js","mtime":1645859199669},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/babel.config.js","mtime":1641298031863},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2RhdmlkL0RvY3VtZW50b3MvRm9ybWFjaW9uL1VkZW15L1ZVRS5KUy9wcm9qZWN0L3Z1ZXBvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgdmF4aW9zIGZyb20gJ0AvcGx1Z2lucy92YXhpb3MnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyL2luZGV4JzsKCnZhciBzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKCkgewogIHJldHVybiB7CiAgICBpc0xvZ2dlZDogZmFsc2UsCiAgICB1c2VyOiAnJwogIH07Cn07Cgp2YXIgZ2V0dGVycyA9IHt9Owp2YXIgbXV0YXRpb25zID0gewogIHNldFVzZXI6IGZ1bmN0aW9uIHNldFVzZXIoc3RhdGUsIHBheWxvYWQpIHsKICAgIHN0YXRlLnVzZXIgPSBwYXlsb2FkOwoKICAgIGlmIChwYXlsb2FkICE9PSAnJykgewogICAgICBzdGF0ZS5pc0xvZ2dlZCA9IHRydWU7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpOwogICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgfSBlbHNlIHsKICAgICAgc3RhdGUuaXNMb2dnZWQgPSBmYWxzZTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgfQogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgbG9nSW46IGZ1bmN0aW9uIGxvZ0luKF9yZWYsIHVzZXIpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIHJlcywgdXNlckxvZ2dlZDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiB2YXhpb3MucG9zdCgnL3VzZXJzL2xvZ2luJywgewogICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgIHVzZXJMb2dnZWQgPSB7CiAgICAgICAgICAgICAgICBuYW1lOiByZXMuZGF0YS51c2VyLm5hbWUsCiAgICAgICAgICAgICAgICBlbWFpbDogcmVzLmRhdGEudXNlci5lbWFpbCwKICAgICAgICAgICAgICAgIHJvbGU6IHJlcy5kYXRhLnVzZXIucm9sZSwKICAgICAgICAgICAgICAgIF9pZDogcmVzLmRhdGEudXNlci5faWQsCiAgICAgICAgICAgICAgICB0b2tlbjogcmVzLnRva2VuCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBjb21taXQoJ3NldFVzZXInLCB1c2VyTG9nZ2VkKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDk7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0VSUk9SXSAtIGxvZ0luOiAnICsgX2NvbnRleHQudDAubWVzc2FnZSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDldXSk7CiAgICB9KSkoKTsKICB9LAogIHVwZGF0ZVVzZXI6IGZ1bmN0aW9uIHVwZGF0ZVVzZXIoX3JlZjIsIHBhcmFtcykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBjb21taXQsIHN0YXRlLCB0b2tlbiwgYm9keSwgY29uZmlnLCByZXMsIHVzZXJMb2dnZWQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0LCBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgICAgICAgICAgIHRva2VuID0gcGFyYW1zWzBdOwogICAgICAgICAgICAgIGJvZHkgPSBwYXJhbXNbMV07CiAgICAgICAgICAgICAgY29uZmlnID0gewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRva2VuKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA0OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gdmF4aW9zLnVwZGF0ZSgnL3VzZXJzL3VwZGF0ZU1lJywgYm9keSwgY29uZmlnKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUlNQOiAnLCByZXMpOwogICAgICAgICAgICAgIHVzZXJMb2dnZWQgPSB7CiAgICAgICAgICAgICAgICBuYW1lOiByZXMuZGF0YS51cGRhdGVkVXNlci5uYW1lLAogICAgICAgICAgICAgICAgZW1haWw6IHJlcy5kYXRhLnVwZGF0ZWRVc2VyLmVtYWlsLAogICAgICAgICAgICAgICAgcm9sZTogcmVzLmRhdGEudXBkYXRlZFVzZXIucm9sZSwKICAgICAgICAgICAgICAgIF9pZDogcmVzLmRhdGEudXBkYXRlZFVzZXIuX2lkLAogICAgICAgICAgICAgICAgdG9rZW46IHRva2VuCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBzdGF0ZS5pc0xvZ2dlZCA9IHRydWU7CiAgICAgICAgICAgICAgc3RhdGUudXNlciA9IHVzZXJMb2dnZWQ7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeSh1c2VyTG9nZ2VkKSk7IC8vY29tbWl0KCdzZXRVc2VyJywgdXNlckxvZ2dlZCk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCByZXMpOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE2OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0VSUk9SXSAtIHVwZGF0ZVVzZXI6ICcgKyBfY29udGV4dDIudDAubWVzc2FnZSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mi50MCk7CgogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbNCwgMTZdXSk7CiAgICB9KSkoKTsKICB9LAogIGxvZ091dDogZnVuY3Rpb24gbG9nT3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICBjb21taXQoJ3NldFVzZXInLCAnJyk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgZ2V0dGVyczogZ2V0dGVycywKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/src/store/modules/users.js"],"names":["vaxios","router","state","isLogged","user","getters","mutations","setUser","payload","localStorage","setItem","JSON","stringify","push","removeItem","actions","logIn","commit","post","email","password","res","userLogged","name","data","role","_id","token","console","log","message","updateUser","params","body","config","headers","Authorization","update","updatedUser","logOut","namespaced"],"mappings":";;;;AAAA,OAAOA,MAAP,MAAmB,kBAAnB;AACA,OAAOC,MAAP,MAAmB,gBAAnB;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA,SAAO;AACnBC,IAAAA,QAAQ,EAAE,KADS;AAEnBC,IAAAA,IAAI,EAAE;AAFa,GAAP;AAAA,CAAd;;AAKA,IAAMC,OAAO,GAAG,EAAhB;AACA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,OADgB,mBACRL,KADQ,EACDM,OADC,EACQ;AACtBN,IAAAA,KAAK,CAACE,IAAN,GAAaI,OAAb;;AACA,QAAIA,OAAO,KAAK,EAAhB,EAAoB;AAClBN,MAAAA,KAAK,CAACC,QAAN,GAAiB,IAAjB;AACAM,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,OAAf,CAA7B;AACAP,MAAAA,MAAM,CAACY,IAAP,CAAY,GAAZ;AACD,KAJD,MAIO;AACLX,MAAAA,KAAK,CAACC,QAAN,GAAiB,KAAjB;AACAM,MAAAA,YAAY,CAACK,UAAb,CAAwB,MAAxB;AACAb,MAAAA,MAAM,CAACY,IAAP,CAAY,QAAZ;AACD;AACF;AAZe,CAAlB;AAeA,IAAME,OAAO,GAAG;AACRC,EAAAA,KADQ,uBACUZ,IADV,EACgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhBa,cAAAA,MAAgB,QAAhBA,MAAgB;AAAA;AAAA;AAAA,qBAERjB,MAAM,CAACkB,IAAP,CAAY,cAAZ,EAA4B;AAC5CC,gBAAAA,KAAK,EAAEf,IAAI,CAACe,KADgC;AAE5CC,gBAAAA,QAAQ,EAAEhB,IAAI,CAACgB;AAF6B,eAA5B,CAFQ;;AAAA;AAEpBC,cAAAA,GAFoB;AAM1B;AACIC,cAAAA,UAPsB,GAOT;AACfC,gBAAAA,IAAI,EAAEF,GAAG,CAACG,IAAJ,CAASpB,IAAT,CAAcmB,IADL;AAEfJ,gBAAAA,KAAK,EAAEE,GAAG,CAACG,IAAJ,CAASpB,IAAT,CAAce,KAFN;AAGfM,gBAAAA,IAAI,EAAEJ,GAAG,CAACG,IAAJ,CAASpB,IAAT,CAAcqB,IAHL;AAIfC,gBAAAA,GAAG,EAAEL,GAAG,CAACG,IAAJ,CAASpB,IAAT,CAAcsB,GAJJ;AAKfC,gBAAAA,KAAK,EAAEN,GAAG,CAACM;AALI,eAPS;AAc1BV,cAAAA,MAAM,CAAC,SAAD,EAAYK,UAAZ,CAAN;AAd0B;AAAA;;AAAA;AAAA;AAAA;AAgB1BM,cAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsB,YAAIC,OAAtC;;AAhB0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkB7B,GAnBa;AAqBRC,EAAAA,UArBQ,6BAqBsBC,MArBtB,EAqB8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzBf,cAAAA,MAAyB,SAAzBA,MAAyB,EAAjBf,KAAiB,SAAjBA,KAAiB;AACpCyB,cAAAA,KADoC,GAC5BK,MAAM,CAAC,CAAD,CADsB;AAEpCC,cAAAA,IAFoC,GAE7BD,MAAM,CAAC,CAAD,CAFuB;AAGpCE,cAAAA,MAHoC,GAG3B;AACbC,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,mBAAYT,KAAZ;AADN;AADI,eAH2B;AAAA;AAAA;AAAA,qBAStB3B,MAAM,CAACqC,MAAP,CAAc,iBAAd,EAAiCJ,IAAjC,EAAuCC,MAAvC,CATsB;;AAAA;AASlCb,cAAAA,GATkC;AAUxCO,cAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBR,GAArB;AACIC,cAAAA,UAXoC,GAWvB;AACfC,gBAAAA,IAAI,EAAEF,GAAG,CAACG,IAAJ,CAASc,WAAT,CAAqBf,IADZ;AAEfJ,gBAAAA,KAAK,EAAEE,GAAG,CAACG,IAAJ,CAASc,WAAT,CAAqBnB,KAFb;AAGfM,gBAAAA,IAAI,EAAEJ,GAAG,CAACG,IAAJ,CAASc,WAAT,CAAqBb,IAHZ;AAIfC,gBAAAA,GAAG,EAAEL,GAAG,CAACG,IAAJ,CAASc,WAAT,CAAqBZ,GAJX;AAKfC,gBAAAA,KAAK,EAAEA;AALQ,eAXuB;AAkBxCzB,cAAAA,KAAK,CAACC,QAAN,GAAiB,IAAjB;AACAD,cAAAA,KAAK,CAACE,IAAN,GAAakB,UAAb;AACAb,cAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeU,UAAf,CAA7B,EApBwC,CAqBxC;;AArBwC,gDAsBjCD,GAtBiC;;AAAA;AAAA;AAAA;AAwBxCO,cAAAA,OAAO,CAACC,GAAR,CAAY,2BAA2B,aAAIC,OAA3C;AAxBwC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2B3C,GAhDa;AAkDdS,EAAAA,MAlDc,yBAkDY;AAAA,QAAjBtB,MAAiB,SAAjBA,MAAiB;AAAA,QAATf,KAAS,SAATA,KAAS;AACxBe,IAAAA,MAAM,CAAC,SAAD,EAAY,EAAZ,CAAN;AACD;AApDa,CAAhB;AAuDA,eAAe;AAAEuB,EAAAA,UAAU,EAAE,IAAd;AAAoBtC,EAAAA,KAAK,EAALA,KAApB;AAA2BG,EAAAA,OAAO,EAAPA,OAA3B;AAAoCC,EAAAA,SAAS,EAATA,SAApC;AAA+CS,EAAAA,OAAO,EAAPA;AAA/C,CAAf","sourcesContent":["import vaxios from '@/plugins/vaxios';\nimport router from '@/router/index';\n\nconst state = () => ({\n  isLogged: false,\n  user: '',\n});\n\nconst getters = {};\nconst mutations = {\n  setUser(state, payload) {\n    state.user = payload;\n    if (payload !== '') {\n      state.isLogged = true;\n      localStorage.setItem('user', JSON.stringify(payload));\n      router.push('/');\n    } else {\n      state.isLogged = false;\n      localStorage.removeItem('user');\n      router.push('/login');\n    }\n  },\n};\n\nconst actions = {\n  async logIn({ commit }, user) {\n    try {\n      const res = await vaxios.post('/users/login', {\n        email: user.email,\n        password: user.password,\n      });\n      //console.log(res);\n      let userLogged = {\n        name: res.data.user.name,\n        email: res.data.user.email,\n        role: res.data.user.role,\n        _id: res.data.user._id,\n        token: res.token,\n      };\n      commit('setUser', userLogged);\n    } catch (err) {\n      console.log('[ERROR] - logIn: ' + err.message);\n    }\n  },\n\n  async updateUser({ commit, state }, params) {\n    const token = params[0];\n    const body = params[1];\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    };\n    try {\n      const res = await vaxios.update('/users/updateMe', body, config);\n      console.log('RSP: ', res);\n      let userLogged = {\n        name: res.data.updatedUser.name,\n        email: res.data.updatedUser.email,\n        role: res.data.updatedUser.role,\n        _id: res.data.updatedUser._id,\n        token: token,\n      };\n      state.isLogged = true;\n      state.user = userLogged;\n      localStorage.setItem('user', JSON.stringify(userLogged));\n      //commit('setUser', userLogged);\n      return res;\n    } catch (err) {\n      console.log('[ERROR] - updateUser: ' + err.message);\n      return err;\n    }\n  },\n\n  logOut({ commit, state }) {\n    commit('setUser', '');\n  },\n};\n\nexport default { namespaced: true, state, getters, mutations, actions };\n"]}]}
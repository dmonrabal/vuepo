{"remainingRequest":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/thread-loader/dist/cjs.js!/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/babel-loader/lib/index.js!/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/src/store/modules/users.js","dependencies":[{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/src/store/modules/users.js","mtime":1641938276403},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/babel.config.js","mtime":1641298031863},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2RhdmlkL0RvY3VtZW50b3MvRm9ybWFjaW9uL1VkZW15L1ZVRS5KUy9wcm9qZWN0L3Z1ZXBvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgdmF4aW9zIGZyb20gJ0AvcGx1Z2lucy92YXhpb3MnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyL2luZGV4JzsKCnZhciBzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKCkgewogIHJldHVybiB7CiAgICBpc0xvZ2dlZDogZmFsc2UsCiAgICB1c2VyOiAnJwogIH07Cn07Cgp2YXIgZ2V0dGVycyA9IHt9Owp2YXIgbXV0YXRpb25zID0gewogIHNldFVzZXI6IGZ1bmN0aW9uIHNldFVzZXIoc3RhdGUsIHBheWxvYWQpIHsKICAgIHN0YXRlLnVzZXIgPSBwYXlsb2FkOwoKICAgIGlmIChwYXlsb2FkICE9PSAnJykgewogICAgICBzdGF0ZS5pc0xvZ2dlZCA9IHRydWU7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpOwogICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgfSBlbHNlIHsKICAgICAgc3RhdGUuaXNMb2dnZWQgPSBmYWxzZTsKICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgfQogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgbG9nSW46IGZ1bmN0aW9uIGxvZ0luKF9yZWYsIHVzZXIpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIHJlcywgdXNlckxvZ2dlZDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiB2YXhpb3MucG9zdCgnL3VzZXJzL2xvZ2luJywgewogICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICB1c2VyTG9nZ2VkID0gewogICAgICAgICAgICAgICAgbmFtZTogcmVzLmRhdGEudXNlci5uYW1lLAogICAgICAgICAgICAgICAgZW1haWw6IHJlcy5kYXRhLnVzZXIuZW1haWwsCiAgICAgICAgICAgICAgICByb2xlOiByZXMuZGF0YS51c2VyLnJvbGUsCiAgICAgICAgICAgICAgICBfaWQ6IHJlcy5kYXRhLnVzZXIuX2lkLAogICAgICAgICAgICAgICAgdG9rZW46IHJlcy50b2tlbgogICAgICAgICAgICAgIH07IC8vdXNlckxvZ2dlZC50b2tlbiA9IHJlcy50b2tlbjsKCiAgICAgICAgICAgICAgY29tbWl0KCdzZXRVc2VyJywgdXNlckxvZ2dlZCk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0VSUk9SXSAtIGxvZ0luOiAnICsgX2NvbnRleHQudDAubWVzc2FnZSk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDEwXV0pOwogICAgfSkpKCk7CiAgfSwKICBsb2dPdXQ6IGZ1bmN0aW9uIGxvZ091dChfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgY29tbWl0KCdzZXRVc2VyJywgJycpOwogICAgY29uc29sZS5sb2coJ1tJTkZPXSAtIENlcnJhbmRvIHNlc3Npb24nKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["/home/david/Documentos/Formacion/Udemy/VUE.JS/project/vuepo/src/store/modules/users.js"],"names":["vaxios","router","state","isLogged","user","getters","mutations","setUser","payload","localStorage","setItem","JSON","stringify","push","actions","logIn","commit","post","email","password","res","console","log","userLogged","name","data","role","_id","token","message","logOut","namespaced"],"mappings":";;;;AAAA,OAAOA,MAAP,MAAmB,kBAAnB;AACA,OAAOC,MAAP,MAAmB,gBAAnB;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA,SAAO;AACnBC,IAAAA,QAAQ,EAAE,KADS;AAEnBC,IAAAA,IAAI,EAAE;AAFa,GAAP;AAAA,CAAd;;AAKA,IAAMC,OAAO,GAAG,EAAhB;AACA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,OADgB,mBACRL,KADQ,EACDM,OADC,EACQ;AACtBN,IAAAA,KAAK,CAACE,IAAN,GAAaI,OAAb;;AACA,QAAIA,OAAO,KAAK,EAAhB,EAAoB;AAClBN,MAAAA,KAAK,CAACC,QAAN,GAAiB,IAAjB;AACAM,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,OAAf,CAA7B;AACAP,MAAAA,MAAM,CAACY,IAAP,CAAY,GAAZ;AACD,KAJD,MAIO;AACLX,MAAAA,KAAK,CAACC,QAAN,GAAiB,KAAjB;AACAF,MAAAA,MAAM,CAACY,IAAP,CAAY,QAAZ;AACD;AACF;AAXe,CAAlB;AAcA,IAAMC,OAAO,GAAG;AACRC,EAAAA,KADQ,uBACUX,IADV,EACgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhBY,cAAAA,MAAgB,QAAhBA,MAAgB;AAAA;AAAA;AAAA,qBAERhB,MAAM,CAACiB,IAAP,CAAY,cAAZ,EAA4B;AAC5CC,gBAAAA,KAAK,EAAEd,IAAI,CAACc,KADgC;AAE5CC,gBAAAA,QAAQ,EAAEf,IAAI,CAACe;AAF6B,eAA5B,CAFQ;;AAAA;AAEpBC,cAAAA,GAFoB;AAM1BC,cAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACIG,cAAAA,UAPsB,GAOT;AACfC,gBAAAA,IAAI,EAAEJ,GAAG,CAACK,IAAJ,CAASrB,IAAT,CAAcoB,IADL;AAEfN,gBAAAA,KAAK,EAAEE,GAAG,CAACK,IAAJ,CAASrB,IAAT,CAAcc,KAFN;AAGfQ,gBAAAA,IAAI,EAAEN,GAAG,CAACK,IAAJ,CAASrB,IAAT,CAAcsB,IAHL;AAIfC,gBAAAA,GAAG,EAAEP,GAAG,CAACK,IAAJ,CAASrB,IAAT,CAAcuB,GAJJ;AAKfC,gBAAAA,KAAK,EAAER,GAAG,CAACQ;AALI,eAPS,EAc1B;;AACAZ,cAAAA,MAAM,CAAC,SAAD,EAAYO,UAAZ,CAAN;AAf0B;AAAA;;AAAA;AAAA;AAAA;AAiB1BF,cAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsB,YAAEO,OAApC;;AAjB0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmB7B,GApBa;AAqBdC,EAAAA,MArBc,yBAqBY;AAAA,QAAjBd,MAAiB,SAAjBA,MAAiB;AAAA,QAATd,KAAS,SAATA,KAAS;AACxBc,IAAAA,MAAM,CAAC,SAAD,EAAY,EAAZ,CAAN;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACD;AAxBa,CAAhB;AA2BA,eAAe;AAAES,EAAAA,UAAU,EAAE,IAAd;AAAoB7B,EAAAA,KAAK,EAALA,KAApB;AAA2BG,EAAAA,OAAO,EAAPA,OAA3B;AAAoCC,EAAAA,SAAS,EAATA,SAApC;AAA+CQ,EAAAA,OAAO,EAAPA;AAA/C,CAAf","sourcesContent":["import vaxios from '@/plugins/vaxios';\nimport router from '@/router/index';\n\nconst state = () => ({\n  isLogged: false,\n  user: '',\n});\n\nconst getters = {};\nconst mutations = {\n  setUser(state, payload) {\n    state.user = payload;\n    if (payload !== '') {\n      state.isLogged = true;\n      localStorage.setItem('user', JSON.stringify(payload));\n      router.push('/');\n    } else {\n      state.isLogged = false;\n      router.push('/login');\n    }\n  },\n};\n\nconst actions = {\n  async logIn({ commit }, user) {\n    try {\n      const res = await vaxios.post('/users/login', {\n        email: user.email,\n        password: user.password,\n      });\n      console.log(res);\n      let userLogged = {\n        name: res.data.user.name,\n        email: res.data.user.email,\n        role: res.data.user.role,\n        _id: res.data.user._id,\n        token: res.token,\n      };\n      //userLogged.token = res.token;\n      commit('setUser', userLogged);\n    } catch (e) {\n      console.log('[ERROR] - logIn: ' + e.message);\n    }\n  },\n  logOut({ commit, state }) {\n    commit('setUser', '');\n    console.log('[INFO] - Cerrando session');\n  },\n};\n\nexport default { namespaced: true, state, getters, mutations, actions };\n"]}]}